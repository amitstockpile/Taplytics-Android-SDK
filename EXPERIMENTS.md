Creating experiments are easy using Taplytics. You can either use our visual editor or create code-based experiments. You can find documentation on how to do this below.

| Table of Contents |
| ----------------- |
| [Code Experiments](#code-experiments) |
| [Visual Editing](#visual-editing) |
| [List Running Experiments](#running-experiments) |

## Code Experiments

#### Setup

To set up a code experiment in Taplytics, please refer to the [Taplytics code-based experiment docs](https://taplytics.com/docs/guides/code-experiments).

#### Usage

Taplytics automatically generates the base needed for your code experiment. Paste it into the relevant section of your app, and apply the variables as necessary. 

It is suggested that you place the code calling the experiment in its own function (as opposed to an oncreate).

For example:

```java
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(some_layout);
    
    // Run this code experiment. This triggers the experiment.
    runAnExperiment();
}
```
    
Then, in that function, add your experiment code generated by Taplytics, and modify it as you need.
    
```java
private void runAnExperiment(){
    Taplytics.runCodeExperiment("experiment name", new TaplyticsCodeExperimentListener() {
    
        @Override
        public void baselineVariation(Map<String, Object> variables) {
                
                        // Insert baseline variation code here.
                        Object myVar0 = variables.get("foo"); // can be null if no experiment is found
                    }
                    
        @Override
        public void experimentVariation(String variationName, Map<String, Object> variables) {
                    Object myVar0 = variables.get("foo"); // can be null if no experiment is found
                
                    if (variationName.equals("Variation 1")) {
                        // Insert Variation 1 variation code here.
                    } else if (variationName.equals("Variation 2")) {
                // Insert Variation 2 variation code here.
            }
        }
    
        @Override
        public void experimentUpdated() {
            // Use this method to re-run your code experiments when testing your ex periment variations.
        }
    });
}
```

This separate function is suggested, because if you would like to update experiments instantly for debug testing or another reason, you can simply place the `runAnExperiment()` function into the `experimentUpdated()` block.

---

## Visual Editing

You don't have to do anything else! All visual editing is done on the Taplytics dashboard. See the docs on visual editing [here](https://taplytics.com/docs/visual-experiments).

---

## Running Experiments

If you would like to see which variations and experiments are running on the device, there exists a `getRunningExperimentsAndVariations(TaplyticsRunningExperimentsListener listener)` function which provides a callback with a map of the current experiments and their running variation. An example:

```java
  Taplytics.getRunningExperimentsAndVariations(new TaplyticsRunningExperimentsListener() {
                    @Override
                    public void runningExperimentsAndVariation(Map<String, String> experimentsAndVariations) {
                        //TODO: Do something with the map.
                    }
                });
```

**NOTE:**This function runs asynchronously, as it waits for the updated properties to load from Taplytics' servers before returning the running experiments. 
